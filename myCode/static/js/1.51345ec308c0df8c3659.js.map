{"version":3,"sources":["webpack:///src/views/Order.vue","webpack:///./src/views/Order.vue?c6ea","webpack:///./src/views/Order.vue"],"names":["Order","name","data","OrderId","OrderNumber","checkedKeys","defaultProps","children","label","trees","id","address","child","checkedList","methods","checkClick","val","submitCheck","checkedListHalf","this","$refs","tree","getHalfCheckedKeys","getCheckedKeys","concat","console","log","edit","diguiquchu","datas","arr","v","i","needdelarr","_this2","map","item","index","push","mounted","$route","params","views_Order","render","_vm","_h","$createElement","_c","_self","_v","_s","ref","attrs","show-checkbox","default-expand-all","default-checked-keys","node-key","highlight-current","props","on","check","size","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"uGAqCA,IAAAA,GACAC,KAAA,QACAC,KAFA,WAGA,OACAC,QAAA,GACAC,YAAA,GAEAC,eACAC,cACAC,SAAA,QACAC,MAAA,WAEAC,QACAC,GAAA,EACAC,QAAA,KACAC,QACAF,GAAA,GACAC,QAAA,KACAC,QACAF,GAAA,IACAC,QAAA,OAEAD,GAAA,IACAC,QAAA,WAIAD,GAAA,EACAC,QAAA,KACAC,QACAF,GAAA,GACAC,QAAA,KACAC,QACAF,GAAA,IACAC,QAAA,OAEAD,GAAA,IACAC,QAAA,WAIAE,iBAGAC,SACAC,WADA,SACAC,KAGAC,YAJA,WAOA,IAAAC,EAAAC,KAAAC,MAAAC,KAAAC,qBACAT,EAAAM,KAAAC,MAAAC,KAAAE,iBACAJ,KAAAN,cAAAW,OAAAN,GACAO,QAAAC,IAAAP,KAAAN,YAAA,SAEAc,KAZA,WAgDAR,KAAAd,aAAA,UAIAuB,WApDA,SAoDAC,EAAAC,EAAAC,EAAAC,EAAAC,GAAA,IAAAC,EAAAf,KAEAW,EAAAK,IAAA,SAAAC,EAAAC,GACAD,EAAA1B,IAAAqB,GAAAK,EAAAxB,OACAqB,EAAAK,KAAAP,GACAG,EAAAN,WAAAC,EAAAO,EAAAxB,MAAAmB,EAAAC,EAAAC,IACAG,EAAA1B,IAAAqB,GAAAK,EAAAxB,OACAsB,EAAAN,WAAAC,EAAAO,EAAAxB,MAAAmB,EAAAC,EAAAC,OAKAM,QA5GA,WA6GApB,KAAAhB,QAAAgB,KAAAqB,OAAAC,OAAAtC,QACAgB,KAAAf,YAAAe,KAAAqB,OAAAC,OAAArC,cChJesC,GADEC,OAFjB,WAA0B,IAAAC,EAAAzB,KAAa0B,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAH,EAAAK,GAAA,kBAAAF,EAAA,KAAAH,EAAAK,GAAA,kBAAAL,EAAAM,GAAAN,EAAAzC,SAAA,cAAA4C,EAAA,MAAAH,EAAAK,GAAA,kBAAAL,EAAAM,GAAAN,EAAAxC,aAAA,YAAAwC,EAAAK,GAAA,wCAAAL,EAAAK,GAAA,KAAAF,EAAA,WAA4PI,IAAA,OAAAC,OAAkBlD,KAAA0C,EAAAnC,MAAA4C,iBAAA,EAAAC,sBAAA,EAAAC,uBAAAX,EAAAvC,YAAAmD,WAAA,KAAAC,oBAAA,GAAAC,MAAAd,EAAAtC,cAAuKqD,IAAKC,MAAAhB,EAAA7B,cAAwB6B,EAAAK,GAAA,KAAAF,EAAA,aAA8BK,OAAOS,KAAA,SAAeF,IAAKG,MAAAlB,EAAA3B,eAAyB2B,EAAAK,GAAA,wBAAAL,EAAAK,GAAA,KAAAF,EAAA,aAA6DK,OAAOS,KAAA,SAAeF,IAAKG,MAAAlB,EAAAjB,QAAkBiB,EAAAK,GAAA,6BAEttBc,oBCYjBC,EAdyBC,EAAQ,OAcjCC,CACElE,EACA0C,GATF,EAEA,KAEA,KAEA,MAUeyB,EAAA,QAAAH,EAAiB","file":"static/js/1.51345ec308c0df8c3659.js","sourcesContent":["<template>\r\n    <div>\r\n        订单\r\n        <p>\r\n            订单id：{{ OrderId }}\r\n            <br>\r\n            订单编号：{{ OrderNumber }}\r\n        </p>\r\n\r\n        element树形控件：若子选中，父也要选中\r\n        <!-- show-checkbox：节点是否可被选择，默认false -->\r\n        <!-- default-expand-all：是否默认展开所有节点 -->\r\n        <!-- default-checked-keys：默认勾选的节点的key的数组 -->\r\n        <!-- node-key：每个树节点用来作为唯一标识的属性，整棵树应该是唯一的 -->\r\n        <!-- @check=\"checkClick：选中所触发的事件 -->\r\n        <!-- highlight-current：是否高亮当前选中节点，默认值是 false -->\r\n        <!-- props：配置选项，具体看下表 -->\r\n        <el-tree\r\n            :data=\"trees\"\r\n            :show-checkbox=\"true\"\r\n            :default-expand-all=\"true\"\r\n            :default-checked-keys=\"checkedKeys\"\r\n            node-key=\"id\"\r\n            ref=\"tree\"\r\n            @check=\"checkClick\"\r\n            highlight-current\r\n            :props=\"defaultProps\">\r\n        </el-tree>\r\n        <el-button size='small' @click=\"submitCheck\">\r\n            提交\r\n        </el-button>\r\n        <el-button size='small' @click=\"edit\">\r\n            编辑\r\n        </el-button>\r\n    </div>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: 'Order',\r\n    data() {\r\n        return {\r\n            OrderId: '',//订单id\r\n            OrderNumber: '',//订单编号\r\n\r\n            checkedKeys: [],//默认勾选的节点的key的数组，eg：[101]\r\n            defaultProps: {//配置选项,指定孩子属性名和页面显示的字段名称\r\n                children: \"child\",\r\n                label: \"address\"\r\n            },\r\n            trees: [{//树形控件数据\r\n                id: 1,\r\n                address: \"江西\",\r\n                child: [{\r\n                    id: 10,\r\n                    address: \"赣州\",\r\n                    child: [{\r\n                        id: 101,\r\n                        address: \"南康\"\r\n                    },{\r\n                        id: 102,\r\n                        address: \"上犹\"\r\n                    }]\r\n                }]\r\n            },{\r\n                id: 2,\r\n                address: \"广东\",\r\n                child: [{\r\n                    id: 20,\r\n                    address: \"深圳\",\r\n                    child: [{\r\n                        id: 201,\r\n                        address: \"宝安\"\r\n                    },{\r\n                        id: 202,\r\n                        address: \"龙岗\"\r\n                    }]\r\n                }]\r\n            }],\r\n            checkedList: []//选中的值，需提交给后台\r\n        }\r\n    },\r\n    methods: {\r\n        checkClick(val){\r\n            // console.log(val, '选择触发事件')\r\n        },\r\n        submitCheck(){\r\n            // 做权限管理的时候，若果有子集被选中了，父级也要被选中，最后把所有的id连接成一个数组发送给后端\r\n            // 官方文档中有这个方法，可以获取到半选中状态的父级的id集合，然后把选中的和半选中的通过concat连接成新数组。\r\n            let checkedListHalf = this.$refs.tree.getHalfCheckedKeys()//获取半选中的父级\r\n            let checkedList = this.$refs.tree.getCheckedKeys()//获取菜单树下选中的菜单列表，缺少半选中的父级\r\n            this.checkedList = checkedList.concat(checkedListHalf)\r\n            console.log(this.checkedList, '提交后台')\r\n        },\r\n        edit(){\r\n            // 做完之后，再次编辑的时候获取后端数据，还是那个数组，需要过滤掉半选中的数据，重新设置好树形控件的选中状态\r\n            // 解决办法：\r\n            // 在methods中写一个过滤函数\r\n            \r\n            // 然后在点击编辑按钮时，后端返回的数据中调用该过滤函数\r\n            if(false){\r\n                var url = api.saverolegroup;\r\n                this.$http.get(url, { \r\n                    params: { \r\n                        id: row.id \r\n                    } \r\n                }).then(res => {\r\n                    let data = res.data;\r\n                    if (data.code == 200) {\r\n                        var rules = data.result.rules;\r\n                        var needdelarr = [];\r\n                        rules.map((v, i) => {\r\n                            this.diguiquchu(\r\n                                data.result.rules,\r\n                                data.result.list,\r\n                                v,\r\n                                i,\r\n                                needDelArr\r\n                            );\r\n                        });\r\n                        console.log(needDelArr);\r\n                        console.log(rules);\r\n                        rules = rules.filter(item => !needDelArr.includes(item));\r\n                        console.log(rules);\r\n                        this.checkedKeys = rules;\r\n                    }\r\n                }).catch(error => {\r\n                    console.log(error);\r\n                });\r\n            }else{\r\n                this.checkedKeys = [101, 201]\r\n            }\r\n        },\r\n        // 过滤函数\r\n        diguiquchu(datas, arr, v, i, needdelarr) {\r\n            //递归找出半选中的数据\r\n            arr.map((item, index) => {\r\n                if (item.id == v && item.child) {\r\n                    needdelarr.push(v);\r\n                    this.diguiquchu(datas, item.child, v, i, needdelarr);\r\n                } else if (item.id != v && item.child) {\r\n                    this.diguiquchu(datas, item.child, v, i, needdelarr);\r\n                }\r\n            });\r\n        },\r\n    },\r\n    mounted() {\r\n        this.OrderId = this.$route.params.OrderId;\r\n        this.OrderNumber = this.$route.params.OrderNumber\r\n    },\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/Order.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\"\\n    订单\\n    \"),_c('p',[_vm._v(\"\\n        订单id：\"+_vm._s(_vm.OrderId)+\"\\n        \"),_c('br'),_vm._v(\"\\n        订单编号：\"+_vm._s(_vm.OrderNumber)+\"\\n    \")]),_vm._v(\"\\n\\n    element树形控件：若子选中，父也要选中\\n    \"),_vm._v(\" \"),_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.trees,\"show-checkbox\":true,\"default-expand-all\":true,\"default-checked-keys\":_vm.checkedKeys,\"node-key\":\"id\",\"highlight-current\":\"\",\"props\":_vm.defaultProps},on:{\"check\":_vm.checkClick}}),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.submitCheck}},[_vm._v(\"\\n        提交\\n    \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"size\":\"small\"},on:{\"click\":_vm.edit}},[_vm._v(\"\\n        编辑\\n    \")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-20524ac9\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/Order.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Order.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Order.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-20524ac9\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Order.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Order.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}